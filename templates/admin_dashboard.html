{% extends 'base.html' %}
{% block content %}


<div style="display: flex; flex-wrap: wrap; gap: 30px; justify-content: center;">
  {% for concert in concerts %}
    <div style="background-color: #111; border: 2px solid #8e44ad; border-radius: 15px; padding: 20px; width: 280px; box-shadow: 0 0 15px rgba(142, 68, 173, 0.4);">
      <img src="{{ url_for('static', filename='posters/' + concert[6]) }}" alt="Concert Poster" style="width: 100%; height: auto; border-radius: 10px; margin-bottom: 15px;">

      <h3 style="color: white; font-size: 20px; margin-bottom: 5px;">{{ concert[1] }} by {{ concert[2] }}</h3>
      <p style="color: #ccc; font-size: 14px; margin-bottom: 15px;">{{ concert[4] }} @ {{ concert[3] }}</p>

      {% if concert[7] == 'done' %}
        <p style="color: #2ecc71; font-weight: bold; margin-bottom: 10px;">âœ… Done</p>
      {% elif concert[8] == 1 %}
        <p style="color: #e74c3c; font-weight: bold; margin-bottom: 10px;">ðŸ”’ Sold Out</p>
      {% else %}
        <p style="color: #f1c40f; font-weight: bold; margin-bottom: 10px;"></p>
      {% endif %}

      <div style="display: flex; flex-direction: column; gap: 10px;">
        <a href="/admin/edit_concert/{{ concert[0] }}">
          <button style="width: 100%; padding: 10px; border: none; border-radius: 25px; background: #f39c12; color: black; font-weight: bold; cursor: pointer;">Edit</button>
        </a>
        {% if concert[7] != 'done' %}
        <form method="POST" action="/admin/mark_done/{{ concert[0] }}" onsubmit="return confirm('Mark this concert as done?')">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

          <button type="submit" style="width: 100%; padding: 10px; border: none; border-radius: 25px; background: #2ecc71; color: white; font-weight: bold; cursor: pointer;">Mark as Done</button>
        </form>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>

{% endblock %}

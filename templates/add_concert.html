{% extends "base.html" %}
{% block content %}

<div style="max-width: 750px; margin: 0 auto; padding: 30px; background-color: #111; border-radius: 15px; box-shadow: 0 0 15px rgba(142, 68, 173, 0.4); color: white;">
  <h2 style="text-align: center; margin-bottom: 30px; font-size: 28px; color: #d3adf7;">
    â• Add New Concert
  </h2>

  <form method="POST" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <table style="width: 100%; border-collapse: collapse; margin-bottom: 25px;">
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ¤ Concert Name</td>
        <td><input type="text" name="name" required
                   style="width: 100%; padding: 10px; border-radius: 8px; border: none; background: #222; color: white;"></td>
      </tr>
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ‘¨â€ğŸ¤ Artist</td>
        <td><input type="text" name="artist" required
                   style="width: 100%; padding: 10px; border-radius: 8px; border: none; background: #222; color: white;"></td>
      </tr>
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ“… Date</td>
        <td><input type="date" name="date" required
                   style="width: 100%; padding: 10px; border-radius: 8px; border: none; background: #222; color: white;"></td>
      </tr>
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ“ Location</td>
        <td><input type="text" name="location" required
                   style="width: 100%; padding: 10px; border-radius: 8px; border: none; background: #222; color: white;"></td>
      </tr>
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ¯ Layout</td>
        <td>
          <select name="layout" id="layout" onchange="generateFields()" required
                  style="width: 100%; padding: 10px; border-radius: 8px; background: #222; color: white;">
            <option value="">Select layout</option>
            <option value="1">Layout 1</option>
            <option value="2">Layout 2</option>
            <option value="3">Layout 3</option>
            <option value="4">Layout 4</option>
          </select>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="padding-top: 20px;">
          <div id="categories-container"></div>
        </td>
      </tr>
      <tr>
        <td style="padding: 10px; font-weight: bold; color: #f39c12;">ğŸ–¼ï¸ Poster</td>
        <td>
          <input type="file" name="poster" accept="image/*" required
                 style="width: 100%; padding: 10px; border-radius: 8px; background: #222; color: white;">
        </td>
      </tr>
    </table>

    <button type="submit"
            style="width: 100%; padding: 12px; background: linear-gradient(135deg, #8e44ad, #e91e63); color: white; font-weight: bold; border: none; border-radius: 30px; cursor: pointer; transition: 0.3s;">
      â• Add Concert
    </button>
  </form>

  <div style="text-align: center; margin-top: 20px;">
    <a href="/admin/dashboard" style="color: #00bfff; text-decoration: underline;">â¬… Back to Concert List</a>
  </div>
</div>

<script>
  const layouts = {
    1: ["VVIP", "VIP", "Patron A", "Patron B", "General Admission"],
    2: ["Floor Standing", "VIP Standing", "Lower Box", "Upper Box", "General Admission"],
    3: ["VVIP", "VIP Seated", "Gold", "Silver", "Bronze"],
    4: ["VIP PIT", "Patron A", "Patron B", "Upper Box A", "Upper Box B"]
  };

  function generateFields() {
    const layout = document.getElementById("layout").value;
    const container = document.getElementById("categories-container");
    container.innerHTML = "";

    if (layouts[layout]) {
      layouts[layout].forEach(cat => {
        const safeCat = cat.replace(/\s+/g, '_');
        container.innerHTML += `
          <div style="margin-bottom: 15px; padding: 15px; background-color: #1f1f2e; border-radius: 10px;">
            <strong style="color: #d3adf7;">${cat}</strong><br>
            <input type="number" name="price_${safeCat}" placeholder="â‚± Price" required
                   style="width: 48%; padding: 8px; margin-top: 8px; border-radius: 6px; background: #222; color: white; border: none;">
            <input type="number" name="count_${safeCat}" placeholder="ğŸ« Seat Count" required
            <input type="number" name="count_${safeCat}" placeholder="ğŸ« Seat Count" required
                   style="width: 48%; padding: 8px; margin-top: 8px; float: right; border-radius: 6px; background: #222; color: white; border: none;">
            <div style="clear: both;"></div>
          </div>
        `;
      });
    }
  }
</script>

{% endblock %}